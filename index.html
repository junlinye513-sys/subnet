<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">

  <title>å­ç¶²è·¯åˆ‡å‰²ç·´ç¿’ï½œç¶²è·¯æ¶è¨­ä¸™ç´šå­¸ç§‘ï½œIP å­ç¶²è·¯è¨ˆç®—æ•™å­¸</title>

  <meta name="description"
    content="å­ç¶²è·¯åˆ‡å‰²ç·´ç¿’ç³»çµ±ï¼Œå°ˆç‚ºç¶²è·¯æ¶è¨­ä¸™ç´šå­¸ç§‘è€ƒè©¦è¨­è¨ˆï¼Œæä¾› IP ä½å€ã€å­ç¶²è·¯é®ç½©è¨ˆç®—èˆ‡å®Œæ•´è§£é¡Œæ­¥é©Ÿï¼Œé©åˆè€ƒå‰ç·´ç¿’èˆ‡æ•™å­¸ä½¿ç”¨ã€‚">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="canonical" href="https://junlinye513-sys.github.io/subnet/">

  <link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

  <style>
    body {
      margin-top: 30px;
      font-size: 18px;
      font-family: "Microsoft JhengHei", sans-serif;
    }
    #result { font-weight: bold; }
    pre {
      background: #f7f7f7;
      padding: 12px;
      border-radius: 5px;
      white-space: pre-wrap;
      font-family: "Courier New", monospace;
    }
    .intro {
      margin: 10px auto 30px;
      max-width: 900px;
      color: #555;
    }
    @media (max-width: 768px) {
      h1 { font-size: 24px; }
      .btn-lg { width: 100%; margin-bottom: 10px; }
    }
  </style>
</head>

<body>
<div class="container">

  <!-- âœ… SEO ä¸»æ¨™é¡Œ -->
  <h1 class="text-center">å­ç¶²è·¯åˆ‡å‰²ç·´ç¿’ï¼ˆç¶²è·¯æ¶è¨­ä¸™ç´šï¼‰</h1>

  <!-- âœ… SEO èªªæ˜æ–‡å­— -->
  <p class="intro text-center">
    æœ¬é ç‚ºã€Œç¶²è·¯æ¶è¨­ä¸™ç´šã€å­¸ç§‘è€ƒè©¦ä½¿ç”¨çš„å­ç¶²è·¯åˆ‡å‰²ç·´ç¿’ç³»çµ±ï¼Œ
    æä¾› IP ä½å€ã€å­ç¶²è·¯é®ç½©è¨ˆç®—èˆ‡å®Œæ•´è§£é¡Œæ­¥é©Ÿï¼Œ
    é©åˆè€ƒå‰ç·´ç¿’èˆ‡æ•™å¸«æ•™å­¸ä½¿ç”¨ã€‚
  </p>

  <form class="form-horizontal">

    <div class="form-group">
      <label class="control-label col-sm-2">åº§è™Ÿï¼š</label>
      <div class="col-sm-10">
        <p class="form-control-static" id="NO"></p>
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-2">Server IPï¼š</label>
      <div class="col-sm-10">
        <p class="form-control-static" id="sIP"></p>
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-2">Client IPï¼š</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="cIP">
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-2">Client å­é®ç½©ï¼š</label>
      <div class="col-sm-10">
        <input type="text" class="form-control" id="netMask">
      </div>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-2">è§£ç­”çµæœï¼š</label>
      <div class="col-sm-10">
        <p class="form-control-static" id="result"></p>
      </div>
    </div>

    <div class="form-group text-center">
      <button type="button" class="btn btn-primary btn-lg" onclick="quesfun()">IP å‡ºé¡Œ</button>
      <button type="button" class="btn btn-success btn-lg" onclick="checkAns()">æª¢æŸ¥ç­”æ¡ˆ</button>
      <button type="button" class="btn btn-info btn-lg" onclick="toggleExplain()">è§£é¡Œæ­¥é©Ÿ</button>
    </div>

    <div class="form-group">
      <label class="control-label col-sm-2">â–¶ è§£é¡Œæ­¥é©Ÿï¼š</label>
      <div class="col-sm-10">
        <pre id="explanation" style="display:none;"></pre>
      </div>
    </div>

  </form>
</div>

<script>
  var a1, a2, a3, a4, a5, num;
  var explainVisible = false;

  function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function quesfun() {
    a1 = rand(1, 223);
    a2 = rand(0, 255);
    a3 = rand(0, 255);
    a4 = rand(0, 255);
    a5 = rand(24, 27);
    num = rand(1, 30);

    document.getElementById("NO").innerText = num;
    document.getElementById("sIP").innerText = `${a1}.${a2}.${a3}.${a4}/${a5}`;
    document.getElementById("result").innerText = "";
    document.getElementById("explanation").style.display = "none";
    explainVisible = false;
  }

  function checkAns() {
    let maskMap = {24:0,25:128,26:192,27:224};
    let maskLast = maskMap[a5];
    let block = 256 - maskLast;
    let subnetStart = Math.floor(a4 / block) * block;

    let correctIP = `${a1}.${a2}.${a3}.${subnetStart + num}`;
    let correctMask = `255.255.255.${maskLast}`;

    let ip = document.getElementById("cIP").value.trim();
    let mask = document.getElementById("netMask").value.trim();

    let msg = "âŒ éŒ¯èª¤", cls = "text-danger";
    if (ip === correctIP && mask === correctMask) {
      msg = "âœ… æ­£ç¢ºï¼";
      cls = "text-success";
    }

    document.getElementById("result").innerText = msg;
    document.getElementById("result").className = cls;
  }

  function toggleExplain() {

    if (typeof a5 === "undefined") {
      alert("è«‹å…ˆæŒ‰ã€IP å‡ºé¡Œã€‘");
      return;
    }

    const box = document.getElementById("explanation");

    if (!explainVisible) {

      let maskLast = {24:0,25:128,26:192,27:224}[a5];
      let block = 256 - maskLast;
      let subnetStart = Math.floor(a4 / block) * block;
      let clientIP = subnetStart + num;

      box.innerText =
`ã€ç¶²è·¯æ¶è¨­ä¸™ç´šï¼è¨­å®šé›»è…¦ TCP/IP åƒæ•¸ è§£é¡Œæ­¥é©Ÿã€‘

æ­¥é©Ÿ 1ï¸âƒ£ï¼šç¢ºèªç¶²è·¯å€æ®µ
â†’ ${a1}.${a2}.${a3}.${a4}/${a5}

æ­¥é©Ÿ 2ï¸âƒ£ï¼šæŸ¥è¡¨æ±ºå®šå­ç¶²è·¯é®ç½©
â†’ /${a5} çš„å­ç¶²è·¯é®ç½©ç‚ºï¼š
â†’ 255.255.255.${maskLast}

æ­¥é©Ÿ 3ï¸âƒ£ï¼šè¨ˆç®—å­ç¶²è·¯å€æ®µå¤§å°
â†’ è¨ˆç®—æ–¹å¼ï¼š256 âˆ’ ${maskLast}
â†’ å€æ®µå¤§å°ï¼š${block}

æ­¥é©Ÿ 4ï¸âƒ£ï¼šæ‰¾å‡ºå­ç¶²è·¯å€æ®µèµ·å§‹ä½å€
â†’ è¨ˆç®—æ–¹å¼ï¼š${a4} Ã· ${block} å–æ•´æ•¸ Ã— ${block}
â†’ å­ç¶²è·¯èµ·å§‹ä½å€ï¼š
â†’ ${a1}.${a2}.${a3}.${subnetStart}

æ­¥é©Ÿ 5ï¸âƒ£ï¼šè¨ˆç®— Client IPï¼ˆè€ƒè©¦è¦å‰‡ï¼‰
â†’ Client IP ï¼ å€æ®µèµ·å§‹ä½å€ ï¼‹ åº§è™Ÿ
â†’ ${subnetStart} ï¼‹ ${num} ï¼ ${clientIP}

âœ… Client IPï¼š${a1}.${a2}.${a3}.${clientIP}
âœ… å­ç¶²è·¯é®ç½©ï¼š255.255.255.${maskLast}

ã€è€ƒè©¦æé†’ã€‘
âœ” Client IP å¿…é ˆä½¿ç”¨ã€Œå­ç¶²è·¯å€æ®µèµ·å§‹ä½å€ + å·¥ä½œå´—ä½è™Ÿç¢¼ã€
âœ” ä¸å¯ä½¿ç”¨ç¶²è·¯ä½å€æˆ–å»£æ’­ä½å€`;

      box.style.display = "block";
      explainVisible = true;

    } else {
      box.style.display = "none";
      explainVisible = false;
    }
  }

  /* ğŸ“± æ‰‹æ©Ÿè¼‰å…¥è‡ªå‹•å‡ºé¡Œ */
  if (window.innerWidth <= 768) {
    window.onload = quesfun;
  }
</script>

</body>
</html>
